export const CSStoJS = {
  "background": "background",
  "background-attachment": "backgroundAttachment",
  "background-color": "backgroundColor",
  "background-image": "backgroundImage",
  "background-position": "backgroundPosition",
  "background-repeat": "backgroundRepeat",
  "border": "border",
  "border-bottom": "borderBottom",
  "border-bottom-color": "borderBottomColor",
  "border-bottom-style": "borderBottomStyle",
  "border-bottom-width": "borderBottomWidth",
  "border-color": "borderColor",
  "border-left": "borderLeft",
  "border-left-color": "borderLeftColor",
  "border-left-style": "borderLeftStyle",
  "border-left-width": "borderLeftWidth",
  "border-right": "borderRight",
  "border-right-color": "borderRightColor",
  "border-right-style": "borderRightStyle",
  "border-right-width": "borderRightWidth",
  "border-style": "borderStyle",
  "border-top": "borderTop",
  "border-top-color": "borderTopColor",
  "border-top-style": "borderTopStyle",
  "border-top-width": "borderTopWidth",
  "border-width": "borderWidth",
  "clear": "clear",
  "clip": "clip",
  "color": "color",
  "cursor": "cursor",
  "display": "display",
  "filter": "filter",
  "float": "cssFloat",
  "font": "font",
  "font-family": "fontFamily",
  "font-size": "fontSize",
  "font-variant": "fontVariant",
  "font-weight": "fontWeight",
  "height": "height",
  "left": "left",
  "letter-spacing": "letterSpacing",
  "line-height": "lineHeight",
  "list-style": "listStyle",
  "list-style-image": "listStyleImage",
  "list-style-position": "listStylePosition",
  "list-style-type": "listStyleType",
  "margin": "margin",
  "margin-bottom": "marginBottom",
  "margin-left": "marginLeft",
  "margin-right": "marginRight",
  "margin-top": "marginTop",
  "overflow": "overflow",
  "padding": "padding",
  "padding-bottom": "paddingBottom",
  "padding-left": "paddingLeft",
  "padding-right": "paddingRight",
  "padding-top": "paddingTop",
  "page-break-after": "pageBreakAfter",
  "page-break-before": "pageBreakBefore",
  "position": "position",
  "stroke-dasharray": "strokeDasharray",
  "stroke-dashoffset": "strokeDashoffset",
  "text-align": "textAlign",
  "text-decoration": "textDecoration",
  "text-indent": "textIndent",
  "text-transform": "textTransform",
  "top": "top",
  "vertical-align": "verticalAlign",
  "visibility": "visibility",
  "width": "width",
  "z-index": "zIndex",
};

export const CSSAttributes: CSSAttribute[] = [
  "background",
  "background-attachment",
  "background-color",
  "background-image",
  "background-position",
  "background-repeat",
  "border",
  "border-bottom",
  "border-bottom-color",
  "border-bottom-style",
  "border-bottom-width",
  "border-color",
  "border-left",
  "border-left-color",
  "border-left-style",
  "border-left-width",
  "border-right",
  "border-right-color",
  "border-right-style",
  "border-right-width",
  "border-style",
  "border-top",
  "border-top-color",
  "border-top-style",
  "border-top-width",
  "border-width",
  "clear",
  "clip",
  "color",
  "cursor",
  "display",
  "filter",
  "float",
  "font",
  "font-family",
  "font-size",
  "font-variant",
  "font-weight",
  "height",
  "left",
  "letter-spacing",
  "line-height",
  "list-style",
  "list-style-image",
  "list-style-position",
  "list-style-type",
  "margin",
  "margin-bottom",
  "margin-left",
  "margin-right",
  "margin-top",
  "overflow",
  "padding",
  "padding-bottom",
  "padding-left",
  "padding-right",
  "padding-top",
  "page-break-after",
  "page-break-before",
  "position",
  "stroke-dasharray",
  "stroke-dashoffset",
  "text-align",
  "text-decoration",
  "text-indent",
  "text-transform",
  "top",
  "vertical-align",
  "visibility",
  "width",
  "z-index",
];

export const AttributeTypes = {
  background: "quotes",
  "background-attachment": "quotes",
  "background-color": "quotes",
  "background-image": "quotes",
  "background-position": "quotes",
  "background-repeat": "quotes",
  border: "quotes",
  "border-bottom": "quotes",
  "border-bottom-color": "quotes",
  "border-bottom-style": "quotes",
  "border-bottom-width": "quotes",
  "border-color": "quotes",
  "border-left": "quotes",
  "border-left-color": "quotes",
  "border-left-style": "quotes",
  "border-left-width": "quotes",
  "border-right": "quotes",
  "border-right-color": "quotes",
  "border-right-style": "quotes",
  "border-right-width": "quotes",
  "border-style": "quotes",
  "border-top": "quotes",
  "border-top-color": "quotes",
  "border-top-style": "quotes",
  "border-top-width": "quotes",
  "border-width": "quotes",
  clear: "quotes",
  clip: "quotes",
  color: "quotes",
  cursor: "quotes",
  display: "quotes",
  filter: "quotes",
  float: "quotes",
  font: "quotes",
  "font-family": "quotes",
  "font-size": "quotes",
  "font-variant": "quotes",
  "font-weight": "quotes",
  height: "noquotes",
  left: "noquotes",
  "letter-spacing": "quotes",
  "line-height": "quotes",
  "list-style": "quotes",
  "list-style-image": "quotes",
  "list-style-position": "quotes",
  "list-style-type": "quotes",
  margin: "noquotes",
  "margin-bottom": "quotes",
  "margin-left": "quotes",
  "margin-right": "quotes",
  "margin-top": "quotes",
  overflow: "quotes",
  padding: "quotes",
  "padding-bottom": "quotes",
  "padding-left": "quotes",
  "padding-right": "quotes",
  "padding-top": "quotes",
  "page-break-after": "quotes",
  "page-break-before": "quotes",
  position: "quotes",
  "stroke-dasharray": "quotes",
  "stroke-dashoffset": "quotes",
  "text-align": "quotes",
  "text-decoration": "quotes",
  "text-indent": "quotes",
  "text-transform": "quotes",
  top: "quotes",
  "vertical-align": "quotes",
  visibility: "quotes",
  width: "quotes",
  "z-index": "quotes",
};

export type CSSAttribute =
  | "background"
  | "background-attachment"
  | "background-color"
  | "background-image"
  | "background-position"
  | "background-repeat"
  | "border"
  | "border-bottom"
  | "border-bottom-color"
  | "border-bottom-style"
  | "border-bottom-width"
  | "border-color"
  | "border-left"
  | "border-left-color"
  | "border-left-style"
  | "border-left-width"
  | "border-right"
  | "border-right-color"
  | "border-right-style"
  | "border-right-width"
  | "border-style"
  | "border-top"
  | "border-top-color"
  | "border-top-style"
  | "border-top-width"
  | "border-width"
  | "clear"
  | "clip"
  | "color"
  | "cursor"
  | "display"
  | "filter"
  | "float"
  | "font"
  | "font-family"
  | "font-size"
  | "font-variant"
  | "font-weight"
  | "height"
  | "left"
  | "letter-spacing"
  | "line-height"
  | "list-style"
  | "list-style-image"
  | "list-style-position"
  | "list-style-type"
  | "margin"
  | "margin-bottom"
  | "margin-left"
  | "margin-right"
  | "margin-top"
  | "min-height"
  | "min-width"
  | "overflow"
  | "overflow-x"
  | "overflow-y"
  | "padding"
  | "padding-bottom"
  | "padding-left"
  | "padding-right"
  | "padding-top"
  | "page-break-after"
  | "page-break-before"
  | "position"
  | "stroke-dasharray"
  | "stroke-dashoffset"
  | "text-align"
  | "text-decoration"
  | "text-decoration-line"
  | "text-decoration-color"
  | "text-decoration-style"
  | "text-decoration-thickness"
  | "text-indent"
  | "text-transform"
  | "top"
  | "vertical-align"
  | "visibility"
  | "width"
  | "z-index";

export const validRegex: {
  name: CSSAttribute[];
  regex: RegExp;
  output: (x: string) => string;
}[] = [
  /**
   * PADDING
   */
  {
    name: ["padding"],
    regex: /^p-(.+)/,
    output: (x) => x,
  },
  {
    name: ["padding-left"],
    regex: /^pl-(.+)/,
    output: (x) => x,
  },
  {
    name: ["padding-right"],
    regex: /^pr-(.+)/,
    output: (x) => x,
  },
  {
    name: ["padding-left", "padding-right"],
    regex: /^px-(.+)/,
    output: (x) => x,
  },
  {
    name: ["padding-top"],
    regex: /^pt-(.+)/,
    output: (x) => x,
  },
  {
    name: ["padding-bottom"],
    regex: /^pb-(.+)/,
    output: (x) => x,
  },
  {
    name: ["padding-top", "padding-bottom"],
    regex: /^py-(.+)/,
    output: (x) => x,
  },
  /**
   * MARGIN
   */
  {
    name: ["margin"],
    regex: /^m-(.+)/,
    output: (x) => x,
  },
  {
    name: ["margin-left"],
    regex: /^ml-(.+)/,
    output: (x) => x,
  },
  {
    name: ["margin-right"],
    regex: /^mr-(.+)/,
    output: (x) => x,
  },
  {
    name: ["margin-left", "margin-right"],
    regex: /^mx-(.+)/,
    output: (x) => x,
  },
  {
    name: ["margin-top"],
    regex: /^mt-(.+)/,
    output: (x) => x,
  },
  {
    name: ["margin-bottom"],
    regex: /^mb-(.+)/,
    output: (x) => x,
  },
  {
    name: ["margin-top", "margin-bottom"],
    regex: /^my-(.+)/,
    output: (x) => x,
  },
  /**
   * TEXT COLOR
   */
  {
    name: ["color"],
    regex: /^text-(.+)/,
    output: (x) => toRGBAWithOpacity(`${x}/100`),
  },
  /**
   * BACKGROUND COLOR
   */
  {
    name: ["background-color"],
    regex: /^^bg-(.+)/,
    output: (x) => toRGBAWithOpacity(`${x}/100`),
  },
  /**
   * FONT SIZE
   */
  {
    name: ["font-size"],
    regex: /^^size-(.+)/,
    output: (x) => x,
  },
  /**
   * FONT WEIGHT
   */
  {
    name: ["font-weight"],
    regex: /^weight-(\d+)/,
    output: (x) => x,
  },
  /**
   * TEXT ALIGN
   */
   {
    name: ["text-align"],
    regex: /^align-(\d+)/,
    output: (x) => x,
  },
  /**
   * TEXT DECORATION
   */
   {
    name: ["text-decoration-line"],
    regex: /^decorate-(\w+)/,
    output: (x) => determineLine(x),
  },
  {
    name: ["text-decoration-color"],
    regex: /^decorate-color-(.+)/,
    output: (x) => toRGBAWithOpacity(`${x}/100`),
  },
  {
    name: ["text-decoration-thickness"],
    regex: /^decorate-width-(.+)/,
    output: (x) => x,
  },
  {
    name: ["text-decoration-style"],
    regex: /^decorate-style-(.+)/,
    output: (x) => x,
  },
  /**
   * HEIGHT
   */
  {
    name: ["height"],
    regex: /^h-(.+)/,
    output: (x) => x,
  },
  {
    name: ["width"],
    regex: /^w-(.+)/,
    output: (x) => x,
  },
  {
    name: ["min-height"],
    regex: /^min-h-(.+)/,
    output: (x) => x,
  },
  {
    name: ["min-width"],
    regex: /^min-w-(.+)/,
    output: (x) => x,
  },
  /**
   * Overflow
   */
  {
    name: ["overflow-x"],
    regex: /^overflow-x-(.+)/,
    output: (x) => x,
  },
  {
    name: ["overflow-y"],
    regex: /^overflow-y-(.+)/,
    output: (x) => x,
  },
  {
    name: ["overflow"],
    regex: /^overflow-(.+)/,
    output: (x) => x,
  },
];

function determineLine(s: string) {
  if(s.toLowerCase() === "underline") return "underline"
  else if(s.toLowerCase() === "overline") return "overline"
  else if(s.toLowerCase() === "line-through") return "line-through"
  else return "none"
}

function toRGBAWithOpacity(s: string): string {
  const color = s.split("/");
//  console.log(color)
  const col = toRGBA(color[0]);
  if (!Array.isArray(col)) return col;
  return `rgba(${col.join(", ")}, ${Number(color[1]) / 100})`;
}

function toRGBA(s: string): string | number[] {
  const color = parseColor(!isNaN(Number(s)) ? Number(s) : s);
  if (typeof color === "string") return color;
  return [(color >> 16) & 255, (color >> 8) & 255, color & 255];
}

function parseColor(color: string | number): string | number {
  if (!color) return Math.floor(Math.random() * (0xffffff + 1));
  if (typeof color === "string" && color.startsWith("#")) {
    color = parseInt(color.replace("#", ""), 16);
  } else if (Array.isArray(color)) {
    color = (color[0] << 16) + (color[1] << 8) + color[2];
  }

  if (color < 0 || color > 0xffffff) throw new RangeError("COLOR_RANGE");
  else if (Number.isNaN(color)) throw new TypeError("COLOR_CONVERT");

  return color;
}
